<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body{ margin: 0; background: rgb(252, 253, 245); overflow-y: auto; height: 100%; } /*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/ ::-webkit-scrollbar { width: 8px; height: 8px; background-color: #F5F5F5; } *{margin:0;padding: 0;box-sizing: border-box;} /*定义滚动条轨道 内阴影+圆角*/ ::-webkit-scrollbar-track { -webkit-box-shadow: inset 0 0 6px rgba(135, 132, 132, 0.30); border-radius: 0px; background-color: #F5F5F5; } /*定义滑块 内阴影+圆角*/ ::-webkit-scrollbar-thumb { border-radius: 10px; -webkit-box-shadow: inset 0 0 6px rgba(144, 142, 142, 0.29); background-color: rgb(217, 213, 213); } .sidebar{ overflow: hidden; width: 228px; position: fixed; padding-top:50px; top: 0; left: 0; bottom: 0; background-color: rgb(245, 245, 245); height:100%; box-sizing: border-box; } .sidebar>ul{ padding: 0px 20px 20px; height: 100%; overflow-y: auto; } .sidebar>ul>li{ list-style-type: none; } .sidebar>ul>li>a{ display: block; margin: 0; padding: 2px 0; border: 0; font-family: "Source Sans Pro", sans-serif; font-weight: 400; font-size: 14px; color: #000; text-decoration: none; } .sidebar>ul>li>a[data-num="1"]{ font-size: 18px; font-weight: 600; padding-left: 0; } .sidebar>ul>li>a[data-num="2"]{ padding-left: 10px; } .sidebar>ul>li>a[data-num="3"]{ padding-left: 20px; } .sidebar>ul>li>a[data-num="4"]{ padding-left: 30px; } .sidebar>ul>li>a[data-num="5"]{ padding-left: 40px; } .sidebar>ul>li>a[data-num="6"]{ padding-left: 50px; } .slidebar>ul>li>a:visited{ background-color: #0088cc; color: #ffffff; } .markdown-body{ max-width: 60em; z-Index: -1; margin-left: 270px; padding: 2.5em; word-wrap: break-word; font-size: 16px; line-height: 1.5; } p, blockquote, ul, ol, dl, pre { margin-top: 0; margin-bottom: 16px; overflow: auto; } h1 { padding-bottom: 0.3em; font-size: 2em; border-bottom: 1px solid #eaecef } h2 { padding-bottom: 0.3em; font-size: 1.5em; border-bottom: 1px solid #eaecef } h3 { font-size: 1.25em } h4 { font-size: 1em } h5 { font-size: 0.875em } h6 { font-size: 0.85em; color: #6a737d } hr { height: 0.25em; padding: 0; margin: 24px 0; background-color: #e1e4e8; border: 0 } blockquote { padding: 0 1em; color: #6a737d; border-left: 0.25em solid #dfe2e5 } blockquote>:first-child { margin-top: 0 } blockquote>:last-child { margin-bottom: 0 } kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: #444d56; vertical-align: middle; background-color: #fafbfc; border: solid 1px #c6cbd1; border-bottom-color: #959da5; border-radius: 3px; box-shadow: inset 0 -1px 0 #959da5 } ul, ol { padding-left: 2em } ul ul, ul ol, ol ol, ol ul { margin-top: 0; margin-bottom: 0 } li { word-wrap: break-word; list-style: inherit } li>p { margin-top: 16px } li+li { margin-top: 0.25em } ol ol ul, ol ul ul, ul ol ul, ul ul ul { list-style-type: square } ol ul, ul ul { list-style-type: circle } ul { list-style-type: disc } ol { list-style: decimal } img { max-width: 100% } pre, xmp, plaintext, listing { padding: 1em; background-color: #dfebf5; } tt, code, kbd, samp { background-color: #dfebf5; } code{ font-family: "SFMono-Regular",Consolas,"Liberation Mono",Menlo,Courier,monospace; } a { color: #0366d6; text-decoration: none; } a:hover { color: #1a03d6; } a:active { color: #ba23d6; } dl { padding: 0; } dl dt { padding: 10px 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; } dl dd { padding: 0 16px; margin-bottom: 16px; } dd { margin-left: 0; } table { border-spacing: 0; width: 100%; } table { border: solid #ccc 1px; border-radius: 6px; margin: 1em 0; } table tr:hover { background: #fbf8e9; transition: all 0.1s ease-in-out; } table td, table th { border-left: 1px solid #ccc; border-top: 1px solid #ccc; padding: 10px; text-align: left; } table th { background-color: #dce9f9; background-image: -webkit-gradient(linear, left top, left bottom, from(#ebf3fc), to(#dce9f9)); border-top: none; text-shadow: 0 1px 0 rgba(255,255,255,.5); padding: 5px; } table td:first-child, table th:first-child { border-left: none; } table th:first-child { border-radius: 6px 0 0 0; } table th:last-child { border-radius: 0 6px 0 0; } table th:only-child{ border-radius: 6px 6px 0 0; } table tr:last-child td:first-child { border-radius: 0 0 0 6px; } table tr:last-child td:last-child { border-radius: 0 0 6px 0; }
    </style>
</head>
<body>
    <div class="sidebar">
        <ul><li><a href="#api-data-deal" alt="API使用说明" data-num="1" >API使用说明</a></li><li><a href="#api-data-deal-method" alt="API使用方法" data-num="2" >API使用方法</a></li><li><a href="#api-param-explain" alt="通用API参数说明" data-num="2" >通用API参数说明</a></li><li><a href="#api-system-Usrinfo" alt="用户API" data-num="1" >用户API</a></li><li><a href="#getvarbycontext" alt="getvarbycontext" data-num="2" >getvarbycontext</a></li><li><a href="#register" alt="register" data-num="2" >register</a></li><li><a href="#login" alt="login" data-num="2" >login</a></li><li><a href="#logout" alt="logout" data-num="2" >logout</a></li><li><a href="#setuserinfo" alt="setuserinfo" data-num="2" >setuserinfo</a></li><li><a href="#api-usergroup-stub" alt="用户组API" data-num="1" >用户组API</a></li><li><a href="#usergroup" alt="usergroup" data-num="2" >usergroup</a></li><li><a href="#usergroupcreate" alt="usergroupcreate" data-num="2" >usergroupcreate</a></li><li><a href="#usergroupdestroy" alt="usergroupdestroy" data-num="2" >usergroupdestroy</a></li><li><a href="#usergroupaddmanager" alt="usergroupaddmanager" data-num="2" >usergroupaddmanager</a></li><li><a href="#usergroupdelmanager" alt="usergroupdelmanager" data-num="2" >usergroupdelmanager</a></li><li><a href="#usergroupaddmember" alt="usergroupaddmember" data-num="2" >usergroupaddmember</a></li><li><a href="#usergroupdelmember" alt="usergroupdelmember" data-num="2" >usergroupdelmember</a></li><li><a href="#ugverifycode" alt="ugverifycode" data-num="2" >ugverifycode</a></li><li><a href="#usergroupjoin" alt="usergroupjoin" data-num="2" >usergroupjoin</a></li><li><a href="#usergroupsetinfo" alt="usergroupsetinfo" data-num="2" >usergroupsetinfo</a></li><li><a href="#usergroupgetinfo" alt="usergroupgetinfo" data-num="2" >usergroupgetinfo</a></li><li><a href="#grant-" alt="grant(以后会删除这个接口)" data-num="2" >grant(以后会删除这个接口)</a></li><li><a href="#checkright-" alt="checkright(以后会删除这个接口)" data-num="2" >checkright(以后会删除这个接口)</a></li><li><a href="#api-data-stub-key" alt="数据库API-键命令" data-num="1" >数据库API-键命令</a></li><li><a href="#set" alt="set" data-num="2" >set</a></li><li><a href="#get" alt="get" data-num="2" >get</a></li><li><a href="#strlen" alt="strlen" data-num="2" >strlen</a></li><li><a href="#del" alt="del" data-num="2" >del</a></li><li><a href="#setdata" alt="setdata" data-num="2" >setdata</a></li><li><a href="#incr" alt="incr" data-num="2" >incr</a></li><li><a href="#api-data-stub-hash" alt="数据库API-hash表" data-num="1" >数据库API-hash表</a></li><li><a href="#hset" alt="hset" data-num="2" >hset</a></li><li><a href="#hdel" alt="hdel" data-num="2" >hdel</a></li><li><a href="#hlen" alt="hlen" data-num="2" >hlen</a></li><li><a href="#hget" alt="hget" data-num="2" >hget</a></li><li><a href="#hgetall" alt="hgetall" data-num="2" >hgetall</a></li><li><a href="#hkeys" alt="hkeys" data-num="2" >hkeys</a></li><li><a href="#hmset" alt="hmset" data-num="2" >hmset</a></li><li><a href="#hmget" alt="hmget" data-num="2" >hmget</a></li><li><a href="#hmclear" alt="hmclear" data-num="2" >hmclear</a></li><li><a href="#hincrby" alt="hincrby" data-num="2" >hincrby</a></li><li><a href="#hscan-" alt="hscan(不对外暴露)" data-num="2" >hscan(不对外暴露)</a></li><li><a href="#hrevscan-" alt="hrevscan(不对外暴露)" data-num="2" >hrevscan(不对外暴露)</a></li><li><a href="#api-data-stub-list" alt="数据库API-List命令" data-num="1" >数据库API-List命令</a></li><li><a href="#lpush" alt="lpush" data-num="2" >lpush</a></li><li><a href="#lpop" alt="lpop" data-num="2" >lpop</a></li><li><a href="#rpush" alt="rpush" data-num="2" >rpush</a></li><li><a href="#rpop" alt="rpop" data-num="2" >rpop</a></li><li><a href="#lrange" alt="lrange" data-num="2" >lrange</a></li><li><a href="#lclear" alt="lclear" data-num="2" >lclear</a></li><li><a href="#lmclear" alt="lmclear" data-num="2" >lmclear</a></li><li><a href="#lindex" alt="lindex" data-num="2" >lindex</a></li><li><a href="#llen" alt="llen" data-num="2" >llen</a></li><li><a href="#lset" alt="lset" data-num="2" >lset</a></li><li><a href="#api-data-stub-set" alt="数据库API-集合" data-num="1" >数据库API-集合</a></li><li><a href="#sadd" alt="sadd" data-num="2" >sadd</a></li><li><a href="#scard" alt="scard" data-num="2" >scard</a></li><li><a href="#sclear" alt="sclear" data-num="2" >sclear</a></li><li><a href="#sdiff" alt="sdiff" data-num="2" >sdiff</a></li><li><a href="#sinter" alt="sinter" data-num="2" >sinter</a></li><li><a href="#smclear" alt="smclear" data-num="2" >smclear</a></li><li><a href="#smembers" alt="smembers" data-num="2" >smembers</a></li><li><a href="#srem" alt="srem" data-num="2" >srem</a></li><li><a href="#sunion" alt="sunion" data-num="2" >sunion</a></li><li><a href="#api-data-stub-sorted" alt="数据库API-有序集合" data-num="1" >数据库API-有序集合</a></li><li><a href="#zadd" alt="zadd" data-num="2" >zadd</a></li><li><a href="#zcard" alt="zcard" data-num="2" >zcard</a></li><li><a href="#zcount" alt="zcount" data-num="2" >zcount</a></li><li><a href="#zrem" alt="zrem" data-num="2" >zrem</a></li><li><a href="#zscore" alt="zscore" data-num="2" >zscore</a></li><li><a href="#zrank" alt="zrank" data-num="2" >zrank</a></li><li><a href="#zrange" alt="zrange" data-num="2" >zrange</a></li><li><a href="#zrangebyscore" alt="zrangebyscore" data-num="2" >zrangebyscore</a></li><li><a href="#zremrangebyscore" alt="zremrangebyscore" data-num="2" >zremrangebyscore</a></li><li><a href="#zmclear" alt="zmclear" data-num="2" >zmclear</a></li><li><a href="#zclear" alt="zclear" data-num="2" >zclear</a></li><li><a href="#api-data-file" alt="文件API" data-num="1" >文件API</a></li><li><a href="#opentempfile" alt="opentempfile" data-num="2" >opentempfile</a></li><li><a href="#setlfiledata" alt="setlfiledata" data-num="2" >setlfiledata</a></li><li><a href="#temp2lfile" alt="temp2lfile" data-num="2" >temp2lfile</a></li><li><a href="#uploadapp" alt="uploadapp" data-num="2" >uploadapp</a></li><li><a href="#uploadappfile" alt="uploadappfile" data-num="2" >uploadappfile</a></li><li><a href="#createfilebydata" alt="createfilebydata" data-num="2" >createfilebydata</a></li><li><a href="#api-data-app" alt="应用API" data-num="1" >应用API</a></li><li><a href="#version" alt="version" data-num="2" >version</a></li><li><a href="#uninstallapp" alt="uninstallapp" data-num="2" >uninstallapp</a></li><li><a href="#appinfo" alt="appinfo" data-num="2" >appinfo</a></li><li><a href="#appversions" alt="appversions" data-num="2" >appversions</a></li><li><a href="#apppackage" alt="apppackage" data-num="2" >apppackage</a></li><li><a href="#appids" alt="appids" data-num="2" >appids</a></li><li><a href="#appinfos" alt="appinfos" data-num="2" >appinfos</a></li><li><a href="#api-system-stub" alt="系统的API" data-num="1" >系统的API</a></li><li><a href="#getvar" alt="getvar" data-num="2" >getvar</a></li><li><a href="#act" alt="act" data-num="2" >act</a></li><li><a href="#proxy" alt="proxy" data-num="2" >proxy</a></li></ul>
    </div>
    <div class="markdown-body">
        <h1 id="api-data-deal">API使用说明</h1>

<h2 id="api-data-deal-method">API使用方法</h2>

<ol>
<li>通过回调函数来处理<pre><code> 例：G.api.test(sid, &#39;test&#39;, data =&gt; {
         console.log(&#39;成功的回调&#39;, &#39;返回的数据是：&#39; + data)
     }, (name, err) =&gt; {
         console.log(&#39;失败的回调&#39;, &#39;API 名称是：&#39; + name, &#39;返回的错误信息是：&#39; + err)
     })</code></pre></li>
<li>通过处理 Promise 的方式来处理<pre><code> 例：G.api.test(sid, &#39;test&#39;).then(data =&gt; {
         console.log(&#39;成功的回调&#39;, &#39;返回的数据是：&#39; + data)
     }).catch((name, err) =&gt; {
         console.log(&#39;失败的回调&#39;, &#39;API 名称是：&#39; + name, &#39;返回的错误信息是：&#39; + err)
     })</code></pre></li>
</ol>
<h2 id="api-param-explain">通用API参数说明</h2>

<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>sid</td>
<td>String</td>
<td>用户的 sid，登录时返回的 sid。</td>
</tr>
<tr>
<td>DATA_ID</td>
<td>String</td>
<td>数据区的id,通过 G.api.usergroupgetinfo(&#39;&#39;, &#39;用户组id&#39;,&#39;DATA_ID&#39;)获取</td>
</tr>
</tbody></table>
<h1 id="api-system-Usrinfo">用户API</h1>

<h2 id="getvarbycontext">getvarbycontext</h2>
<ul>
<li>G.api.getvarbycontext(null, name, mapOpt)<blockquote>
<p>获取硬件对应的签名。</p>
</blockquote>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>String</td>
<td>正式发布：name=&#39;ppt&#39;，测试环境：name=&#39;ppttest&#39; or &#39;ppttest2&#39;</td>
</tr>
<tr>
<td>mapOpt</td>
<td>Object</td>
<td>传入不同的对象会返回不同的签名，对象里属性对应的值必须为 String</td>
</tr>
</tbody></table>
<pre><code>例：G.api.getvarbycontext(null, &#39;ppt&#39;, {type: &#39;PC&#39;})    // 获取 PC 端的硬件签名</code></pre><h2 id="register">register</h2>
<ul>
<li>G.api.register(JSON.stringify(userinfo))<blockquote>
<p>注册用户</p>
</blockquote>
</li>
</ul>
<pre><code>参数说明：
    userinfo：包含用户信息的JSON对象
    其中的参数包括：
        &quot;name&quot; //用户名，必须有
        &quot;pass&quot; //密码，必须有
        &quot;ppt&quot; //硬件签名
        &quot;father&quot; //用户的父级</code></pre><pre><code>例：注册一个用户名为小黄，密码为123456的用户
    G.api.register(JSON.stringify({
            name:&#39;小黄&#39;,
            pass:&#39;123456&#39;
        }))</code></pre><h2 id="login">login</h2>
<ol>
<li><p>G.api.login(name, pass, &#39;byname&#39;)</p>
<blockquote>
<p>通过用户名密码登录</p>
</blockquote>
</li>
<li><p>G.api.login(ppt,&#39;&#39;,&#39;byppt2&#39;)</p>
<blockquote>
<p>通过ppt的方式登录</p>
</blockquote>
</li>
</ol>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>String</td>
<td>用户名</td>
</tr>
<tr>
<td>pass</td>
<td>String</td>
<td>用户密码</td>
</tr>
<tr>
<td>ppt</td>
<td>String（JSON）</td>
<td>硬件对应的签名</td>
</tr>
</tbody></table>
<pre><code>例：登陆小黄的账户
    G.api.login(&#39;小黄&#39;, &#39;123456&#39;, &#39;byname&#39;)</code></pre><h2 id="logout">logout</h2>
<ul>
<li>G.api.logout(sid,info)<blockquote>
<p>用户登出，使用户的sid失效</p>
</blockquote>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>sid</td>
<td>String</td>
<td>用户登录凭证，用户的 sid，登录时返回的 sid。</td>
</tr>
<tr>
<td>info</td>
<td>String</td>
<td>用户信息，一般为空</td>
</tr>
</tbody></table>
<pre><code>例：登出小黄的账户
    G.api.logout(sid,null)</code></pre><h2 id="setuserinfo">setuserinfo</h2>
<ul>
<li>G.api.setuserinfo(sid, JSON.stringify(userinfo))<blockquote>
<p>设置用户信息 </p>
</blockquote>
</li>
</ul>
<pre><code>参数说明：
    userinfo：包含用户信息的JSON对象,必须要有验证信息（用户名、密码或者ppt的方式验证）,
    在属性前加上 new 用于设置、加上 del 用于删除。
    其中的参数包括：
        &quot;name&quot; //用户名
        &quot;pass&quot; //密码
        &quot;ppt&quot; //硬件签名
        &quot;userid&quot; //用户id，当前操作用户的id，针对无鉴权信息的用户
        &quot;newname&quot; //新的用户名，设置用
        &quot;newpass&quot; //新的密码，设置用
        &quot;newppt&quot; //新的通行证，设置用
        &quot;delppt&quot; //通行证Bindinfo，删除用
        &quot;father&quot; //用户的父级</code></pre><pre><code>例: 将小黄的密码修改为1234567
    let userInfo={
        name:&#39;小黄&#39;, //用户名
        pass:&#39;123456&#39;, //密码
        newpass:&#39;1234567&#39; //新密码
    }
    G.api.setuserinfo(sid,JSON.stringify(userinfo))</code></pre><h1 id="api-usergroup-stub">用户组API</h1>

<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>gid</td>
<td>String</td>
<td>用户组id，生成用户组返回的id</td>
</tr>
<tr>
<td>groupname</td>
<td>String</td>
<td>组名称，如果为空，则使用用户名</td>
</tr>
<tr>
<td>timeout</td>
<td>Number</td>
<td>过期时间，单位 s</td>
</tr>
<tr>
<td>userid</td>
<td>String</td>
<td>用户的id</td>
</tr>
<tr>
<td>verify</td>
<td>String</td>
<td>验证码，通过 <code>G.api.ugverifycode(sid, gid, timeout)</code> 生成</td>
</tr>
</tbody></table>
<h2 id="usergroup">usergroup</h2>
<ul>
<li>G.api.getvar(&#39;&#39;, &#39;usergroup&#39;, groupname, &#39;name&#39;) </li>
</ul>
<blockquote>
<p>查询用户组信息</p>
</blockquote>
<pre><code>例：查询名为MY_TEST用户组的组信息
    G.api.getvar(&#39;&#39;, &#39;usergroup&#39;, &#39;MY_TEST&#39;, &#39;name&#39;,data=&gt;{
        console.log(&#39;用户组信息&#39;,data);
    })</code></pre><h2 id="usergroupcreate">usergroupcreate</h2>
<ul>
<li>G.api.usergroupcreate(sid, groupname)</li>
</ul>
<blockquote>
<p>生成用户组</p>
</blockquote>
<pre><code>例：生成名为MY_TEST的用户组，并返回组id
    G.api.usergroupcreate(sid, &#39;MY_TEST&#39;,gid=&gt;{
        console.log(&#39;用户组ID&#39;,gid);
    }) </code></pre><h2 id="usergroupdestroy">usergroupdestroy</h2>
<ul>
<li>G.api.usergroupdestroy(sid, gid)<blockquote>
<p>销毁用户组</p>
</blockquote>
</li>
</ul>
<h2 id="usergroupaddmanager">usergroupaddmanager</h2>
<ul>
<li>G.api.usergroupaddmanager(sid, gid, userid)<blockquote>
<p>添加管理员</p>
</blockquote>
</li>
</ul>
<h2 id="usergroupdelmanager">usergroupdelmanager</h2>
<ul>
<li>G.api.usergroupdelmanager(sid, gid, userid)<blockquote>
<p>删除管理员</p>
</blockquote>
</li>
</ul>
<h2 id="usergroupaddmember">usergroupaddmember</h2>
<ul>
<li>G.api.usergroupaddmember(sid, gid, userid)<blockquote>
<p>添加成员</p>
</blockquote>
</li>
</ul>
<h2 id="usergroupdelmember">usergroupdelmember</h2>
<ul>
<li>G.api.usergroupdelmember(sid, gid, userid)<blockquote>
<p>删除数据组成员</p>
</blockquote>
</li>
</ul>
<h2 id="ugverifycode">ugverifycode</h2>
<ul>
<li>G.api.ugverifycode(sid, gid, timeout)<blockquote>
<p>创建加入的验证码,如果原有的未过期，则返回，并设置新的 timeout</p>
</blockquote>
</li>
</ul>
<pre><code>例：管理员在用户组生成一个时长为30分钟的验证码。
    G.api.ugverifycode(sid, gid,1800, verify =&gt; {
        console.log(&#39;验证码&#39;,verify);
    })</code></pre><h2 id="usergroupjoin">usergroupjoin</h2>
<ul>
<li>G.api.usergroupjoin(sid, gid, verify)</li>
</ul>
<blockquote>
<p>加入用户组</p>
</blockquote>
<pre><code> 例：用户通过验证码加入用户组
    G.api.usergroupjoin(sid, gid,verify)</code></pre><h2 id="usergroupsetinfo">usergroupsetinfo</h2>
<ul>
<li>G.api.usergroupsetinfo(sid, gid, k,v)</li>
</ul>
<blockquote>
<p>设置组信息</p>
</blockquote>
<pre><code>参数说明:
    k:数据区名
    v:数据区id</code></pre><pre><code>例:把名为DATA_ID的数据区的id设置为abcdefg
    G.api.usergroupsetinfo(sid, gid,&#39;DATA_ID&#39;,&#39;abcdefg&#39;)</code></pre><h2 id="usergroupgetinfo">usergroupgetinfo</h2>
<ul>
<li>G.api.usergroupgetinfo(sid, gid, k)</li>
</ul>
<blockquote>
<p>获取组信息</p>
</blockquote>
<pre><code>参数说明:
    k:数据区名</code></pre><pre><code>例：获取名为DATA_ID的数据区的id
    G.api.usergroupgetinfo(&#39;&#39;, gid,&#39;DATA_ID&#39;)
</code></pre><h2 id="grant-">grant(以后会删除这个接口)</h2>
<ul>
<li>G.api.grant(sid,key,fileId,gid,right)</li>
</ul>
<blockquote>
<p>数据块授权</p>
</blockquote>
<pre><code>参数说明:
    key:主键，&#39;&#39;代表全部
    fileId:数据区id,&#39;&#39;代表全部
    right:liunx下的权限表达式,该参数不是字符串，是计算结果 ，一般为 256 * 7 + 7  
   256代表管理员  7代表全权限   后面的7表示用户的权限   0代表没有权限，4读取，1执行，2写入，7全权限1+2+4=7</code></pre><pre><code>例:把该用户下名为TEST的表的全部权限赋值给用户组
    G.api.grant(sid,&#39;TEST&#39;,&#39;&#39; gid,256 * 7 + 7)</code></pre><h2 id="checkright-">checkright(以后会删除这个接口)</h2>
<ul>
<li>G.api.checkright(sid,gid,key,fileId,right)</li>
</ul>
<blockquote>
<p>检查对数据区操作权限</p>
</blockquote>
<pre><code>参数说明:
    key:主键，&#39;&#39;代表全部
    fileId:数据区id,&#39;&#39;代表全部
    right:liunx下的权限表达式,该参数不是字符串，是计算结果 ，一般为 256 * 7 + 7  
   256代表管理员  7代表全权限   后面的7表示用户的权限   0代表没有权限，4读取，1执行，2写入，7全权限1+2+4=7</code></pre><pre><code>例:检查本用户是否对TEST表具有操作权限
    G.api.checkright(sid,gid,&#39;TEST&#39;,&#39;&#39;,7)</code></pre><h1 id="api-data-stub-key">数据库API-键命令</h1>

<blockquote>
<p>设置指定 key 的值</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>key</td>
<td>String</td>
<td>主键</td>
</tr>
<tr>
<td>value</td>
<td>String (JSON)</td>
<td>指定字段的值</td>
</tr>
</tbody></table>
<h2 id="set">set</h2>
<ul>
<li>G.api.set(sid, DATA_ID, key, value)</li>
</ul>
<pre><code>例：将小黄的信息存在主键中
    let userinfo={
        userid:&#39;a123456&#39;,
        name:&#39;小黄&#39;,
        age:&#39;20&#39;,
        sex:&#39;男&#39;
    }
    userinfo=JSON.stringify(userinfo)
    G.api.set(sid, DATA_ID, &#39;小黄&#39;,userinfo)</code></pre><h2 id="get">get</h2>
<ul>
<li>G.api.get(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>获取指定 key 的值</p>
</blockquote>
<pre><code>例：获取小黄的用户信息
    G.api.get(sid, DATA_ID, &#39;小黄&#39;,userinfo=&gt;{
        console.log(&#39;小黄的信息&#39;,userinfo);
    })</code></pre><h2 id="strlen">strlen</h2>
<ul>
<li>G.api.strlen(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>返回 key 所储存的字符串值的长度。</p>
</blockquote>
<pre><code>例：查询小黄的用户信息字符的长度
    G.api.strlen(sid, DATA_ID, &#39;小黄&#39;,len=&gt;{
        console.log(&#39;信息的长度&#39;,len);
    })
</code></pre><h2 id="del">del</h2>
<ul>
<li>G.api.del(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>该命令用于在 key 存在时删除 key</p>
</blockquote>
<pre><code>例：删除小黄的用户信息
    G.api.del(sid, DATA_ID, &#39;小黄&#39;)</code></pre><h2 id="setdata">setdata</h2>
<ul>
<li>G.api.setdata(sid, DATA_ID, value)</li>
</ul>
<blockquote>
<p>该命令用于将数据存于数据库中并返回key</p>
</blockquote>
<pre><code>例：将小黄的信息存于数据库中
    let userinfo={
        userid:&#39;a123456&#39;,
        name:&#39;小黄&#39;,
        age:&#39;20&#39;,
        sex:&#39;男&#39;
    }
    userinfo=JSON.stringify(userinfo)
    G.api.setdata(sid, DATA_ID, userinfo,id=&gt;{
        console.log(&#39;数据id&#39;,id);
    })</code></pre><h2 id="incr">incr</h2>
<ul>
<li>G.api.incr(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>将 key 中储存的数字值增一</p>
</blockquote>
<pre><code>例：将小黄的信息存于数据库中
    let userinfo={
        userid:&#39;a123456&#39;,
        name:&#39;小黄&#39;,
        age:&#39;20&#39;,
        sex:&#39;男&#39;
    }
    userinfo=JSON.stringify(userinfo)
    G.api.setdata(sid, DATA_ID, userinfo,id=&gt;{
    console.log(&#39;数据id&#39;,id);
 })
</code></pre><h1 id="api-data-stub-hash">数据库API-hash表</h1>

<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>key</td>
<td>String</td>
<td>主键</td>
</tr>
<tr>
<td>keys</td>
<td>Array</td>
<td>key的数组</td>
</tr>
<tr>
<td>field</td>
<td>String</td>
<td>字段</td>
</tr>
<tr>
<td>fields</td>
<td>Array</td>
<td>field的数组</td>
</tr>
<tr>
<td>value</td>
<td>String (JSON)</td>
<td>指定字段的值</td>
</tr>
</tbody></table>
<h2 id="hset">hset</h2>
<ul>
<li>G.api.hset(sid, DATA_ID, key, field, value)</li>
</ul>
<blockquote>
<p>设置键值</p>
</blockquote>
<pre><code>例：将用户的信息存到MY_USERINFO的表中
    let userinfo={
        userid:&#39;a123456&#39;,
        name:&#39;小黄&#39;,
        age:&#39;20&#39;,
        sex:&#39;男&#39;
    }
    let field=userinfo.userid;
    userinfo=JSON.stringify(userinfo)
    G.api.hset(sid, DATA_ID, &#39;MY_USERINFO&#39;, field, userinfo)//如果没有MY_USERINFO表将会自动创建</code></pre><h2 id="hdel">hdel</h2>
<ul>
<li>G.api.hdel(sid, DATA_ID, key,field)</li>
</ul>
<blockquote>
<p>删除一个哈希表字段</p>
</blockquote>
<pre><code>例：将MY_USERINFO的表中小黄的信息删除掉
    let field=&#39;a123456&#39;;
    G.api.hdel(sid, DATA_ID, &#39;MY_USERINFO&#39;, field)</code></pre><h2 id="hlen">hlen</h2>
<ul>
<li>G.api.hlen(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>获取哈希表中字段的数量</p>
</blockquote>
<pre><code>例：获取MY_USERINFO的表中用户的个数
    G.api.hlen(sid, DATA_ID, &#39;MY_USERINFO&#39;,length=&gt;{
        console.log(&#39;用户个数&#39;,length);
    })</code></pre><h2 id="hget">hget</h2>
<ul>
<li>G.api.hget(sid, DATA_ID, key, field)</li>
</ul>
<blockquote>
<p>获取存储在哈希表中指定字段的值</p>
</blockquote>
<pre><code>例：获取MY_USERINFO的表中小黄的用户信息
    let field=&#39;a123456&#39;;
    G.api.hget(sid, DATA_ID, &#39;MY_USERINFO&#39;,field,userinfo=&gt;{
        console.log(&#39;用户信息&#39;,userinfo);
    })</code></pre><h2 id="hgetall">hgetall</h2>
<ul>
<li>G.api.hgetall(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>获取在哈希表中指定 key 的所有字段和值</p>
</blockquote>
<pre><code>例：获取MY_USERINFO的表中所有用户信息
    G.api.hgetall(sid, DATA_ID, &#39;MY_USERINFO&#39;,userinfoArr=&gt;{
        console.log(&#39;用户信息的数组&#39;,userinfoArr);
    })</code></pre><h2 id="hkeys">hkeys</h2>
<ul>
<li>G.api.hkeys(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>获取所有哈希表中的字段</p>
</blockquote>
<pre><code>例：获取MY_USERINFO的表中所有的字段
    G.api.hkeys(sid, DATA_ID, &#39;MY_USERINFO&#39;,fieldArr=&gt;{
        console.log(&#39;表中的所有字段&#39;,fieldArr);
    })
</code></pre><h2 id="hmset">hmset</h2>
<ul>
<li>G.api.hmset(sid, DATA_ID, key, field)</li>
</ul>
<blockquote>
<p>同时将多个 field-value (域-值)对设置到哈希表 key 中。</p>
</blockquote>
<pre><code>例：将二黄和三黄的用户信息添加到MY_USERINFO表中
    let userinfo1={
        userid:&#39;b123456&#39;,
        name:&#39;二黄&#39;,
        age:&#39;21&#39;,
        sex:&#39;男&#39;
    }
    let userinfo2={
        userid:&#39;c123456&#39;,
        name:&#39;三黄&#39;,
        age:&#39;22&#39;,
        sex:&#39;男&#39;
    }
    let userinfoArr=[];
    userinfoArr.push({field:userinfo1.userid,value:JSON.stringify(userinfo1)})
    userinfoArr.push({field:userinfo2.userid,value:JSON.stringify(userinfo2)})
    G.api.hmset(sid, DATA_ID, &#39;MY_USERINFO&#39;,...userinfoArr)</code></pre><h2 id="hmget">hmget</h2>
<ul>
<li>G.api.hmget(sid, DATA_ID, key, ...fields)</li>
</ul>
<blockquote>
<p>获取所有给定字段的值</p>
</blockquote>
<pre><code>例：获取MY_USERINFO的表中二黄和三黄的用户信息
    let field1=&#39;b123456&#39;;
    let field2=&#39;c123456&#39;;
    let arr=[field1,field2];
    G.api.hmget(sid, DATA_ID, &#39;MY_USERINFO&#39;,...arr,userinfoArr=&gt;{
    console.log(&#39;用户信息的数组&#39;,userinfoArr);
 })</code></pre><h2 id="hmclear">hmclear</h2>
<ul>
<li>G.api.hmclear(sid, DATA_ID, ...keys)</li>
</ul>
<blockquote>
<p>清空哈希表</p>
</blockquote>
<pre><code>例1：清空MY_USERINFO的表中所有的用户信息
    G.api.hmclear(sid, DATA_ID, &#39;MY_USERINFO&#39;)

例2：清空MY_USERINFO和MY_USERINFO1表
    let arr=[&#39;MY_USERINFO&#39;,&#39;MY_USERINFO1&#39;]
    G.api.hmclear(sid, DATA_ID, ...arr)</code></pre><h2 id="hincrby">hincrby</h2>
<ul>
<li>G.api.hincrby(sid, DATA_ID, key,delta)</li>
</ul>
<blockquote>
<p>为哈希表 key 中的指定字段的整数值加上增量 。</p>
<pre><code>参数说明：
    delta:</code></pre></blockquote>
<pre><code>例：建立一张MY_STORE表格，记录苹果的个数是100，又进货了100个苹果
    G.api.hset(sid, DATA_ID, &#39;MY_STORE&#39;, &#39;apple&#39;, 100)
    G.api.hincrby(sid, DATA_ID,&#39;MY_STORE&#39;, &#39;apple&#39;, 100)</code></pre><h2 id="hscan-">hscan(不对外暴露)</h2>
<ul>
<li>G.api.hscan(sid, DATA_ID, key,beginfield,match,count,inclusive)</li>
</ul>
<blockquote>
<p>通过正则表达式从前往后匹配fileId，查找需要的值</p>
</blockquote>
<pre><code>参数说明：
    beginfield:开始匹配的位置，类型为String，为空时，从第一个开始匹配
    match:正则匹配的内容，类型为String,空为不进行正则匹配
    count:查找的数量，类型为number，整数，0为查找全部符合条件的内容
    inclusive:查找是否包含与match一样的内容，true 包含，false 不包含，类型Boolearn</code></pre><pre><code>例：查找MY_USERINFO的表中带有黄字的用户信息
    G.api.hscan(sid, DATA_ID, &#39;MY_USERINFO&#39;,&#39;&#39;,&#39;黄&#39;,null,true,userinfoArr=&gt;{
        console.log(&#39;带有黄字的全部用户信息&#39;,userinfoArr)
    })</code></pre><h2 id="hrevscan-">hrevscan(不对外暴露)</h2>
<ul>
<li>G.api.hrevscan(sid, DATA_ID, key,beginfield,match,count,inclusive)</li>
</ul>
<blockquote>
<p>通过正则表达式从后往前匹配fileId，查找需要的值</p>
</blockquote>
<pre><code>参数说明：
    beginfield:开始匹配的位置，类型为String
    match:正则匹配的内容，类型为String,空为不进行正则匹配
    count:查找的数量，类型为number，整数，空为查找全部符合条件的内容
    inclusive:查找是否包含与match一样的内容，true 包含，false 不包含，类型Boolearn</code></pre><pre><code>例：查找MY_USERINFO的表中最后一个带有黄字的用户信息
    G.api.hrevscan(sid, DATA_ID, &#39;MY_USERINFO&#39;,&#39;&#39;,&#39;黄&#39;,1,true,userinfoArr=&gt;{
        console.log(&#39;最后一个带有黄字的用户&#39;,userinfoArr)
    })</code></pre><h1 id="api-data-stub-list">数据库API-List命令</h1>

<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>DATA_ID</td>
<td>String</td>
<td>数据区的id,通过 G.api.usergroupgetinfo(&#39;&#39;, &#39;用户组id&#39;,&#39;DATA_ID&#39;)获取。</td>
</tr>
<tr>
<td>key</td>
<td>String</td>
<td>主键</td>
</tr>
<tr>
<td>keys</td>
<td>Array</td>
<td>主键的数组</td>
</tr>
<tr>
<td>index</td>
<td>number</td>
<td>列表索引</td>
</tr>
<tr>
<td>value</td>
<td>String (JSON)</td>
<td>指定字段的值</td>
</tr>
</tbody></table>
<h2 id="lpush">lpush</h2>
<ul>
<li>G.api.lpush(sid, DATA_ID, key,value)</li>
</ul>
<blockquote>
<p>将一个或多个值插入到列表头部</p>
</blockquote>
<pre><code>例：将小黄的信息存到名为TEST的列表中
    let userinfo={
        userid:&#39;b123456&#39;,
        name:&#39;小黄&#39;,
        age:&#39;21&#39;,
        sex:&#39;男&#39;
    }
    userinfo=JSON.stringify(userinfo)}
    G.api.lpush(sid, DATA_ID,&#39;TEST&#39;,userinfo)</code></pre><h2 id="lpop">lpop</h2>
<ul>
<li>G.api.lpop(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>移出并获取列表的第一个元素</p>
</blockquote>
<pre><code>例：获取TEST列表中第一元素的值，并删除
    G.api.lpush(sid, DATA_ID, &#39;TEST&#39;,data=&gt;{
        console.log(&#39;TEST列表中的第一个元素&#39;,data)
    })</code></pre><h2 id="rpush">rpush</h2>
<ul>
<li>G.api.rpush(sid, DATA_ID, key,value)</li>
</ul>
<blockquote>
<p>在列表中添加一个或多个值</p>
</blockquote>
<pre><code>例：将二黄和三黄的用户信息添加到TEST列表中
    let userinfo1={
        userid:&#39;b123456&#39;,
        name:&#39;二黄&#39;,
        age:&#39;21&#39;,
        sex:&#39;男&#39;
    }
    let userinfo2={
        userid:&#39;c123456&#39;,
        name:&#39;三黄&#39;,
        age:&#39;22&#39;,
        sex:&#39;男&#39;
    }
    let userinfoArr=[];
    userinfoArr.push(JSON.stringify(userinfo1))
    userinfoArr.push(JSON.stringify(userinfo2))
    G.api.rpush(sid, DATA_ID, &#39;TEST&#39;,...userinfoArr)</code></pre><h2 id="rpop">rpop</h2>
<ul>
<li>G.api.rpop(sid, DATA_ID, key,value)</li>
</ul>
<blockquote>
<p>移除并获取列表最后一个元素</p>
</blockquote>
<pre><code>例：获取并删除TEST列表中的最后一个元素
    G.api.rpop(sid, DATA_ID, &#39;TEST&#39;,data=&gt;{
        console.log(&#39;TEST列表中的最后一个元素&#39;,data)
    })</code></pre><h2 id="lrange">lrange</h2>
<ul>
<li>G.api.lrange(sid, DATA_ID, key,start,stop)</li>
</ul>
<blockquote>
<p>获取列表指定范围内的元素</p>
</blockquote>
<pre><code>参数说明：
    start:开始的索引号，类型number
    stop:结束的索引号，类型number</code></pre><pre><code>例：获取TEST列表中第1个到第3个元素
    G.api.lrange(sid, DATA_ID, &#39;TEST&#39;,0,2,dataArr=&gt;{
        console.log(&#39;TEST列表中第1个到第3个元素的值为&#39;,dataArr);
    })</code></pre><h2 id="lclear">lclear</h2>
<ul>
<li>G.api.lclear(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>清空列表中的值</p>
</blockquote>
<pre><code>例：清空TEST列表
    G.api.lclear(sid, DATA_ID, &#39;TEST&#39;)</code></pre><h2 id="lmclear">lmclear</h2>
<ul>
<li>G.api.lmclear(sid, DATA_ID, ...keys)</li>
</ul>
<blockquote>
<p>清空列表中的值</p>
</blockquote>
<pre><code>例：清空TEST列表和TEST1列表
    let arr=[&#39;TEST&#39;,&#39;TEST1&#39;];
    G.api.lmclear(sid, DATA_ID, ...arr)</code></pre><h2 id="lindex">lindex</h2>
<ul>
<li>G.api.lindex(sid, DATA_ID, key,index)</li>
</ul>
<blockquote>
<p>通过索引获取列表中的元素</p>
</blockquote>
<pre><code>例：获取TEST列表中索引为1的元素
    G.api.lindex(sid, DATA_ID, &#39;TEST&#39;,1,data=&gt;{
        console.log(&#39;索引为1元素值为&#39;,data)
    })</code></pre><h2 id="llen">llen</h2>
<ul>
<li>G.api.llen(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>获取列表长度</p>
</blockquote>
<pre><code>例：获取TEST列表的长度
    G.api.lindex(sid, DATA_ID, &#39;TEST&#39;,1,len=&gt;{
        console.log(&#39;列表的长度&#39;,len)
    })</code></pre><h2 id="lset">lset</h2>
<ul>
<li>G.api.lset(sid, DATA_ID, key,index,value)</li>
</ul>
<blockquote>
<p>通过索引设置列表元素的值</p>
</blockquote>
<pre><code>参数说明：
    index:为整数，且必须该索引是存在的</code></pre><pre><code>例：把小黄的信息设置在TEST列表中索引为1的元素
    let userinfo={
        userid:&#39;b123456&#39;,
        name:&#39;小黄&#39;,
        age:&#39;22&#39;,
        sex:&#39;男&#39;
    }
    userinfo=JSON.stringify(userinfo)}
    G.api.lset(sid, DATA_ID,&#39;TEST&#39;,1,userinfo)</code></pre><h1 id="api-data-stub-set">数据库API-集合</h1>


<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>DATA_ID</td>
<td>String</td>
<td>数据区的id,通过 G.api.usergroupgetinfo(&#39;&#39;, &#39;用户组id&#39;,&#39;DATA_ID&#39;)获取。</td>
</tr>
<tr>
<td>key</td>
<td>String</td>
<td>主键</td>
</tr>
<tr>
<td>keys</td>
<td>Array</td>
<td>主键的数组</td>
</tr>
<tr>
<td>value</td>
<td>String (JSON)</td>
<td>指定字段的值</td>
</tr>
<tr>
<td>values</td>
<td>Array</td>
<td>value的数组</td>
</tr>
</tbody></table>
<h2 id="sadd">sadd</h2>
<ul>
<li>G.api.sadd(sid, DATA_ID, key, ...values)</li>
</ul>
<blockquote>
<p>将一个或多个元素加入到集合当中</p>
</blockquote>
<pre><code>例：将小黄和二黄的分数，加入到TEST集合中
    let userInfo1={name:&#39;小黄&#39;,score:80}
    let userInfo2={name:&#39;二黄&#39;,score:90}
    userInfo1=JSON.stringify(userInfo1)
    userInfo2=JSON.stringify(userInfo2)
    let arr=[userInfo1,userInfo2]
    G.api.sadd(sid, DATA_ID, &#39;TEST&#39;,...arr)</code></pre><h2 id="scard">scard</h2>
<ul>
<li>G.api.scard(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>返回集合中元素的数量。</p>
</blockquote>
<pre><code>例：获取TEST集合中元素的数量
    G.api.scard(sid, DATA_ID, &#39;TEST&#39;,len=&gt;{
        console.log(&#39;EST集合中元素的数量&#39;,len)
    })</code></pre><h2 id="sclear">sclear</h2>
<ul>
<li>G.api.sclear(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>清空集合</p>
</blockquote>
<pre><code>例：清空TEST集合中
    G.api.sclear(sid, DATA_ID, &#39;TEST&#39;)</code></pre><h2 id="sdiff">sdiff</h2>
<ul>
<li>G.api.sdiff(sid, DATA_ID,...keys)</li>
</ul>
<blockquote>
<p>返回一个集合的全部成员，该集合是所有给定集合之间的差集。</p>
</blockquote>
<pre><code>例：获取TEST1和TEST2集合不同的元素
    let arr=[&#39;TEST1&#39;,&#39;TEST2&#39;]
    G.api.sclear(sid, DATA_ID, ...arr,dataArr=&gt;{
        console.log(&#39;两个集合中不同的元素&#39;,dataArr)
    })</code></pre><h2 id="sinter">sinter</h2>
<ul>
<li>G.api.sinter(sid, DATA_ID, ...keys)</li>
</ul>
<blockquote>
<p>返回一个集合的全部成员，该集合是所有给定集合的交集。</p>
</blockquote>
<pre><code>例：获取TEST1和TEST2两个集合中相同的元素
    let arr=[&#39;TEST1&#39;,&#39;TEST2&#39;]
    G.api.sinter(sid, DATA_ID, ...arr,dataArr=&gt;{
        console.log(&#39;两个集合中相同的元素&#39;,dataArr)
    })</code></pre><h2 id="smclear">smclear</h2>
<ul>
<li>G.api.smclear(sid, DATA_ID, ...keys)</li>
</ul>
<blockquote>
<p>将一个或多个集合清空</p>
</blockquote>
<pre><code>例：清空TEST1和TEST2两个集合
    let arr=[&#39;TEST1&#39;,&#39;TEST2&#39;]
    G.api.smclear(sid, DATA_ID, ...arr)</code></pre><h2 id="smembers">smembers</h2>
<ul>
<li>G.api.smembers(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>返回集合中的所有成员。</p>
</blockquote>
<pre><code>例：获取TEST集合中全部的元素
    G.api.smembers(sid, DATA_ID,&#39;TEST&#39;,dataArr=&gt;{
        console.log(&#39;EST集合中全部的元素&#39;,dataArr)
    })</code></pre><h2 id="srem">srem</h2>
<ul>
<li>G.api.srem(sid, DATA_ID, key, ...values)</li>
</ul>
<blockquote>
<p>移除集合中的一个或多个元素，不存在的 元素会被忽略。</p>
</blockquote>
<pre><code>例：将小黄和二黄从TEST集合中移除
    let userInfo1={name:&#39;小黄&#39;,score:80}
    let userInfo2={name:&#39;二黄&#39;,score:90}
    userInfo1=JSON.stringify(userInfo1)
    userInfo2=JSON.stringify(userInfo2)
    let arr=[userInfo1,userInfo2]
    G.api.srem(sid, DATA_ID, &#39;TEST&#39;,...arr)
</code></pre><h2 id="sunion">sunion</h2>
<ul>
<li>G.api.sunion(sid, DATA_ID,...keys)</li>
</ul>
<blockquote>
<p>返回一个集合的全部成员，该集合是所有给定集合的并集。</p>
</blockquote>
<pre><code>例：获取TEST1和TEST2两个集合全部的元素
    let arr=[&#39;TEST1&#39;,&#39;TEST2&#39;]
    G.api.sunion(sid, DATA_ID, ...arr,dataArr=&gt;{
        console.log(&#39;两个集合全部的元素&#39;,dataArr)
    })
</code></pre><h1 id="api-data-stub-sorted">数据库API-有序集合</h1>

<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>DATA_ID</td>
<td>String</td>
<td>数据区的id,通过 G.api.usergroupgetinfo(&#39;&#39;, &#39;用户组id&#39;,&#39;DATA_ID&#39;)获取。</td>
</tr>
<tr>
<td>key</td>
<td>String</td>
<td>主键</td>
</tr>
<tr>
<td>keys</td>
<td>Array</td>
<td>主键的数组</td>
</tr>
<tr>
<td>index</td>
<td>Number</td>
<td>列表索引</td>
</tr>
<tr>
<td>ScorePair</td>
<td>Function</td>
<td>构造函数 function ScorePair(){this.score=&#39;&#39;;this.member=&#39;&#39;}</td>
</tr>
<tr>
<td>member</td>
<td>String</td>
<td>构造函数ScorePair中的参数</td>
</tr>
<tr>
<td>member</td>
<td>String</td>
<td>member的数组</td>
</tr>
</tbody></table>
<h2 id="zadd">zadd</h2>
<ul>
<li>G.api.zadd(sid, DATA_ID, key, ...ScorePair)</li>
</ul>
<blockquote>
<p>向有序集合添加一个或多个成员，或者更新已存在成员的分数</p>
</blockquote>
<pre><code>例：将小黄和二黄的分数，加入到TEST有序集合中
    function ScorePair(){
    }

    let userInfo1=new ScorePair();
    let userInfo2=new ScorePair();
    userInfo1.member=&#39;小黄&#39;;
    userInfo1.score=&#39;80;
    userInfo2.member=&#39;二黄&#39;;
    userInfo2.score=90;

    G.api.zadd(sid, DATA_ID, &#39;TEST&#39;,userInfo1)


    let arr=[userInfo1,userInfo2]
    G.api.zadd(sid, DATA_ID, &#39;TEST&#39;,...arr)
</code></pre><h2 id="zcard">zcard</h2>
<ul>
<li>G.api.zcard(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>获取有序集合的成员数</p>
</blockquote>
<pre><code>例：获取TEST有序集合的成员数
    G.api.zcard(sid, DATA_ID, &#39;TEST&#39;,len=&gt;{
        console.log(&#39;有序集合的成员数&#39;,len)
    })</code></pre><h2 id="zcount">zcount</h2>
<ul>
<li>G.api.zcount(sid, DATA_ID, key,min,max)</li>
</ul>
<blockquote>
<p>计算在有序集合中指定区间分数的成员数</p>
</blockquote>
<pre><code>参数说明：
    min:最小值，类型number
    max：最大值，类型number</code></pre><pre><code>例：获取TEST有序集合中分数80到100之间的成员数
    G.api.zcount(sid, DATA_ID, &#39;TEST&#39;,80,100,len=&gt;{
        console.log(&#39;列表的长度&#39;,len)
    })</code></pre><h2 id="zrem">zrem</h2>
<ul>
<li>G.api.zrem(sid, DATA_ID,key, ...members)</li>
</ul>
<blockquote>
<p>移除有序集合中的一个或多个成员</p>
</blockquote>
<pre><code>例：移除TEST有序集合中的小黄
    let member1=&#39;小黄&#39;;
    let arr=[member1];
    G.api.zrem(sid, DATA_ID, &#39;TEST&#39;,...arr)</code></pre><h2 id="zscore">zscore</h2>
<ul>
<li>G.api.zscore(sid, DATA_ID, key,member)</li>
</ul>
<blockquote>
<p>返回有序集中，成员的分数值</p>
</blockquote>
<pre><code>例：获取小黄的分数
    G.api.zscore(sid, DATA_ID, &#39;TEST&#39;,&#39;小黄&#39;,score=&gt;{
        console.log(&#39;小黄的分数&#39;,score)
    })
</code></pre><h2 id="zrank">zrank</h2>
<ul>
<li>G.api.zrank(sid, DATA_ID, key,member)</li>
</ul>
<blockquote>
<p>返回有序集合中指定成员的索引</p>
</blockquote>
<pre><code>例：获取小黄在TEST有序集合中的位置
    G.api.zrank(sid, DATA_ID, &#39;TEST&#39;,&#39;小黄&#39;,index=&gt;{
        console.log(&#39;小黄的位置编号&#39;,index)
    })</code></pre><h2 id="zrange">zrange</h2>
<ul>
<li>G.api.zrange(sid, DATA_ID, key,min,max)</li>
</ul>
<blockquote>
<p>通过索引区间返回有序集合成指定区间内的成员</p>
</blockquote>
<pre><code>参数说明：
    min:最小值，类型number
    max：最大值，类型number</code></pre><pre><code>例：获取[0,1]区间的数据
    G.api.zrange(sid, DATA_ID, &#39;TEST&#39;,0,1,dataArr=&gt;{
        console.log(&#39;区间的数据&#39;,dataArr)
    })</code></pre><h2 id="zrangebyscore">zrangebyscore</h2>
<ul>
<li>G.api.zrangebyscore(sid, DATA_ID, key,min,max,offset,count)</li>
</ul>
<blockquote>
<p>返回有序集合中给定的分数区间的所有成员</p>
</blockquote>
<pre><code>参数说明：
    min:最小值，类型number
    max:最大值，类型number
    offset:偏移值，一般为0，
    count:获取成员的个数，-1为获取全部</code></pre><pre><code>例：获取70分到80分的数据 
    G.api.zrangebyscore(sid, DATA_ID, &#39;TEST&#39;,70,80,0,-1,dataArr=&gt;{
        console.log(&#39;0分到80分的数据&#39;,dataArr)
    })
</code></pre><h2 id="zremrangebyscore">zremrangebyscore</h2>
<ul>
<li>G.api.zremrangebyscore(sid, DATA_ID, key,min,max)</li>
</ul>
<blockquote>
<p>返回有序集合中给定的分数区间的所有成员</p>
</blockquote>
<pre><code>参数说明：
    min:最小值，类型number
    max：最大值，类型number</code></pre><pre><code>例：获取70分到80分的数据
    G.api.zremrangebyscore(sid, DATA_ID, &#39;TEST&#39;,70,80,dataArr=&gt;{
        console.log(&#39;0分到80分的数据&#39;,dataArr)
    })</code></pre><h2 id="zmclear">zmclear</h2>
<ul>
<li>G.api.zmclear(sid, DATA_ID, ...keys)</li>
</ul>
<blockquote>
<p>清除有序集合</p>
</blockquote>
<pre><code>例：清空TEST集合和TEST1集合
    let arr=[&#39;TEST&#39;,&#39;TEST1&#39;];
    G.api.zmclear(sid, DATA_ID,...arr)</code></pre><h2 id="zclear">zclear</h2>
<ul>
<li>G.api.zclear(sid, DATA_ID, key)</li>
</ul>
<blockquote>
<p>清除有序集合</p>
</blockquote>
<pre><code>例：清空TEST集合
    G.api.zclear(sid, DATA_ID, &#39;TEST&#39;)</code></pre><!-- 
不对外公开
* G.api.copyblock(sid, DATA_ID,from)

> 将备份数据库

* G.api.scan(sid, DATA_ID, begin, match,count,inclusive,tp)

> 迭代当前数据库中的数据库键。 -->

<h1 id="api-data-file">文件API</h1>

<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>tempFileId</td>
<td>String</td>
<td>文件临时ID</td>
</tr>
<tr>
<td>fileId</td>
<td>String</td>
<td>正式文件id</td>
</tr>
<tr>
<td>fileName</td>
<td>String</td>
<td>文件名称</td>
</tr>
<tr>
<td>start</td>
<td>Number</td>
<td>数据开始写入的位置，一般为0</td>
</tr>
<tr>
<td>FileData</td>
<td>二进制文件</td>
<td>二进制文件</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>文件类型  tar or zip</td>
</tr>
<tr>
<td>appName</td>
<td>String</td>
<td>应用名称</td>
</tr>
</tbody></table>
<h2 id="opentempfile">opentempfile</h2>
<ul>
<li>G.api.opentempfile(sid)</li>
</ul>
<blockquote>
<p>申请临时文件id</p>
</blockquote>
<h2 id="setlfiledata">setlfiledata</h2>
<ul>
<li>G.api.setlfiledata(sid,tempFileId, start, FileData)</li>
</ul>
<blockquote>
<p>生成临时文件，生成使用空间</p>
</blockquote>
<h2 id="temp2lfile">temp2lfile</h2>
<ul>
<li>G.api.temp2lfile(sid,tempFileId)</li>
</ul>
<blockquote>
<p>生成正式文件id</p>
</blockquote>
<h2 id="uploadapp">uploadapp</h2>
<ul>
<li>G.api.uploadapp(sid, fileId,type)</li>
</ul>
<blockquote>
<p>发布应用,返回应用信息</p>
</blockquote>
<pre><code>例：上传test应用，并发布
    let file;//原生文件
    let type;//文件类型 tar or zip
    upload();
    async upload function(){
        let tempFileId=await G.api.opentempfile(sid);//申请临时文件id
        let FileData=await readBlob(file); //将原文件转换成二进制
        await G.api.setlfiledata(sid,tempFileId, 0, FileData); //生成临时文件，生成使用空间
        let fileId=await G.api.temp2lfile(sid,tempFileId); //生成正式文件id
        G.api.uploadapp(sid, fileId,type) //发布应用
    }

    readBlob(blob) {
        const reader = new FileReader()
        return new Promise(resolve =&gt; {
            reader.onloadend = () =&gt; {
                resolve(reader.result)
            }
            reader.readAsArrayBuffer(blob)
        })
    }</code></pre><h2 id="uploadappfile">uploadappfile</h2>
<ul>
<li>G.api.uploadappfile(sid, appName, fileName, fileId)</li>
</ul>
<blockquote>
<p>更新应用中部分的源文件</p>
</blockquote>
<pre><code>例：更新test应用中main.html文件
    let file;//上传的main.html文件
    uploadfile();
    async uploadfile function(){
        let tempFileId=await G.api.opentempfile(sid);//申请临时文件id
        let FileData=await readBlob(file); //将原文件转换成二进制
        await G.api.setlfiledata(sid,tempFileId, 0, FileData); //生成临时文件，生成使用空间
        let fileId=await G.api.temp2lfile(sid,tempFileId); //生成正式文件id
        G.api.uploadapp(sid, &#39;test&#39;,&#39;main.html&#39;,fileId) //更新文件
    }

    readBlob(blob) {
        const reader = new FileReader()
        return new Promise(resolve =&gt; {
            reader.onloadend = () =&gt; {
                resolve(reader.result)
            }
            reader.readAsArrayBuffer(blob)
        })
    }</code></pre><h2 id="createfilebydata">createfilebydata</h2>
<ul>
<li>G.api.createfilebydata(sid,conent)</li>
</ul>
<blockquote>
<p>更新文件内容</p>
</blockquote>
<pre><code>例：在线更新test应用中main.html文件
    let conent;//修改后文本内容
    uploadfile();
    async uploadfile function(){
        let fileId=await G.api.createfilebydata(sid, conent);
        G.api.uploadapp(sid, &#39;test&#39;,&#39;main.html&#39;,fileId) //更新文件
    }</code></pre><h1 id="api-data-app">应用API</h1>

<h2 id="version">version</h2>
<ul>
<li>G.api.version(sid, appName,&#39;lastver&#39;,&#39;&#39;)</li>
</ul>
<blockquote>
<p>生成新的版本</p>
</blockquote>
<h2 id="uninstallapp">uninstallapp</h2>
<ul>
<li>G.api.uninstallapp(sid, appName)</li>
</ul>
<blockquote>
<p>应用卸载</p>
</blockquote>
<h2 id="appinfo">appinfo</h2>
<ul>
<li>G.api.getvar(sid, &quot;appinfo&quot;, &quot;appName or appId&quot;) </li>
</ul>
<blockquote>
<p>获取应用信息</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>appId</td>
<td>String</td>
<td>应用id</td>
</tr>
<tr>
<td>appName</td>
<td>String</td>
<td>应用名称</td>
</tr>
</tbody></table>
<pre><code>例：获取TEST应用信息
    G.api.getvar(sid, &quot;appinfo&quot;, &quot;TEST&quot;,appinfo=&gt;{
        console.log(&#39;TEST应用信息&#39;,appinfo)
    }) </code></pre><h2 id="appversions">appversions</h2>
<ul>
<li>G.api.getvar(sid, &quot;appversions&quot;, &quot;appName or appId&quot;) </li>
</ul>
<blockquote>
<p>获取应用版本信息</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>appId</td>
<td>String</td>
<td>应用id</td>
</tr>
<tr>
<td>appName</td>
<td>String</td>
<td>应用名称</td>
</tr>
</tbody></table>
<pre><code>例：获取TEST应用的版本信息
    G.api.getvar(sid, &quot;appversions&quot;, &quot;TEST&quot;,versionArr=&gt;{
        console.log(&#39;TEST应用的版本信息&#39;,versionArr)
    }) 
</code></pre><h2 id="apppackage">apppackage</h2>
<ul>
<li>G.api.getvar(sid, &quot;apppackage&quot;, &quot;appName or appId&quot;,version) </li>
</ul>
<blockquote>
<p>获取应用最新文件信息</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>appId</td>
<td>String</td>
<td>应用id</td>
</tr>
<tr>
<td>appName</td>
<td>String</td>
<td>应用名称</td>
</tr>
<tr>
<td>version</td>
<td>String</td>
<td>版本号，一般为last</td>
</tr>
</tbody></table>
<pre><code>例：获取TEST应用最新文件信息
    G.api.getvar(sid, &quot;apppackage&quot;, &quot;TEST&quot;,&#39;last&#39;,apppackage=&gt;{
        console.log(&#39;TEST应用文件信息&#39;,apppackage)
    }) </code></pre><h2 id="appids">appids</h2>
<ul>
<li>G.api.getvar(sid, &quot;appids&quot;) </li>
</ul>
<blockquote>
<p>获取应用id列表</p>
</blockquote>
<pre><code>例：获取本用户应用id列表
    G.api.getvar(sid, &quot;appids&quot;,appidArr=&gt;{
        console.log(&#39;本用户应用id列表&#39;,appidArr)
    }) 
</code></pre><h2 id="appinfos">appinfos</h2>
<ul>
<li>G.api.getvar(sid, &quot;appinfos&quot;) </li>
</ul>
<blockquote>
<p>获取具体应用信息列表  </p>
</blockquote>
<pre><code>例：获取本用户全部应用列表
    G.api.getvar(sid, &quot;appinfos&quot;,appArr=&gt;{
        console.log(&#39;本用户全部应用&#39;,appArr)
    }) 
</code></pre><h1 id="api-system-stub">系统的API</h1>

<h2 id="getvar">getvar</h2>
<p> G.api.getver(sid, name, ...arg)</p>
<blockquote>
<p>根据 name 来获取对应的值，name 为 String 类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>name (String)</th>
<th>arg</th>
<th>返回值</th>
</tr>
</thead>
<tbody><tr>
<td>now</td>
<td>无</td>
<td>获取系统时间 </td>
</tr>
<tr>
<td>capturemac</td>
<td>无</td>
<td>获取探针开启状态，默认为 0 （开启），1 为 用户开启，2 为用户关闭</td>
</tr>
<tr>
<td>ver</td>
<td>无</td>
<td>获取版本号</td>
</tr>
<tr>
<td>port</td>
<td>无</td>
<td>获取端口号</td>
</tr>
<tr>
<td>hostid</td>
<td>无</td>
<td>获取hostid</td>
</tr>
<tr>
<td>bindinfo</td>
<td>无</td>
<td>获取用户设备信息</td>
</tr>
<tr>
<td>usergroup</td>
<td>&#39;GLOBAL_USER&#39;, &#39;name&#39;</td>
<td>获取管理员组</td>
</tr>
<tr>
<td>appinfo</td>
<td>&#39;appName&#39; or &#39;appId&#39;</td>
<td>获取应用信息</td>
</tr>
<tr>
<td>appversions</td>
<td>&#39;appName&#39; or &#39;appId&#39;</td>
<td>获取应用版本信息</td>
</tr>
<tr>
<td>apppackage</td>
<td>&#39;appName&#39; or &#39;appId&#39;</td>
<td>获取应用最新文件信息</td>
</tr>
<tr>
<td>appids</td>
<td>无</td>
<td>获取应用id列表</td>
</tr>
<tr>
<td>appinfos</td>
<td>无</td>
<td>获取具体应用信息列表</td>
</tr>
</tbody></table>
<pre><code>例：G.api.getver(sid, &#39;now&#39;)    
    // 获取系统时间
    G.api.getvar(sid, &#39;usergroup&#39;, &#39;GLOBAL_USER&#39;, &#39;name&#39;)  
    //查找管理员组</code></pre><h2 id="act">act</h2>
<p>G.api.act(sid, name, ...arg)</p>
<blockquote>
<p>根据 name 来获取对应的值，name 为 String 类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>name (String)</th>
<th>arg</th>
<th>返回值</th>
</tr>
</thead>
<tbody><tr>
<td>subscrimacInfo</td>
<td>无</td>
<td>订阅mac数据</td>
</tr>
<tr>
<td>capturemac</td>
<td>&#39;start&#39;</td>
<td>打开网卡探测</td>
</tr>
</tbody></table>
<pre><code>例：1. 订阅mac数据
    G.api.act(sid, &#39;subscrimacInfo&#39;)

    2.打开网卡探测
    G.api.act(sid, &#39;capturemac&#39;, &#39;start&#39;)</code></pre><h2 id="proxy">proxy</h2>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明 </th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>String</td>
<td>要代理的路径</td>
</tr>
<tr>
<td>header</td>
<td>Object</td>
<td>请求头部，默认为null</td>
</tr>
<tr>
<td>postContent</td>
<td>*</td>
<td>发送的内容</td>
</tr>
</tbody></table>
<ol>
<li>G.api.proxyget(sid, url)<blockquote>
<p>开启 get 代理</p>
</blockquote>
</li>
</ol>
<pre><code>例：开启代理请求http://localhost:5758/mytest接口,并发送TEST字符串
    G.api.proxyget(sid, &#39;http://localhost:5758/mytest?data=&#39;TEST&#39;&#39;)
</code></pre><ol start="2">
<li>G.api.proxypost(sid, url, header, postContent)<blockquote>
<p>开启 post 代理</p>
</blockquote>
</li>
</ol>
<pre><code> 例：开启代理请求http://localhost:5758/mytest接口,并发送TEST字符串
    G.api.proxypost(sid, &#39;http://localhost:5758/mytest&#39;,null,JSON.stringify({data:&#39;TEST&#39;})) </code></pre>
    </div>
</body>
</html>